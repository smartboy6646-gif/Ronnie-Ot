<!DOCTYPE html>
<html lang="ne">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OT Note</title>

<style>
body{
    margin:0;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
    background:#f1f5f9;
}
.app{
    max-width:420px;
    margin:auto;
    background:#fff;
    padding:18px;
    border-radius:18px;
    margin-top:15px;
    box-shadow:0 10px 25px rgba(0,0,0,.1);
}
h2{text-align:center;color:#1e3a8a;margin-bottom:4px}
.sub{text-align:center;font-size:13px;color:#64748b;margin-bottom:15px}

label{font-weight:600;color:#1e40af}
input[type=time]{
    width:100%;
    padding:12px;
    font-size:20px;
    margin-top:8px;
    border:2px solid #3b82f6;
    border-radius:10px;
    text-align:center;
}

button{
    width:100%;
    padding:14px;
    border:none;
    border-radius:12px;
    background:#2563eb;
    color:#fff;
    font-size:16px;
    font-weight:700;
    margin-top:15px;
}

.summary{
    background:#0f172a;
    color:#fff;
    text-align:center;
    padding:15px;
    border-radius:14px;
    margin-top:18px;
}
.total{
    font-size:32px;
    font-weight:800;
    color:#4ade80;
}

table{width:100%;margin-top:18px;border-collapse:collapse}
th,td{padding:10px;font-size:14px;border-bottom:1px solid #e5e7eb}
th{color:#94a3b8;font-size:11px}
.ot{color:#ef4444;font-weight:700}

.del{
    background:#fee2e2;
    color:#ef4444;
    border:none;
    padding:5px 8px;
    border-radius:6px;
    font-size:12px;
}

.clear{
    background:none;
    color:#94a3b8;
    font-size:11px;
    margin-top:20px;
}
</style>
</head>

<body>
<div class="app">
    <h2>Overtime Note ðŸ•’</h2>
    <div class="sub">Duty: 8:00 AM â€“ 5:30 PM</div>

    <label>Out Time (PM)</label>
    <input type="time" id="outTime" value="19:00">

    <button onclick="saveOT()">Save OT</button>

    <div class="summary">
        Total OT
        <div class="total" id="total">0.00 hrs</div>
    </div>

    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>Time</th>
                <th>OT</th>
                <th></th>
            </tr>
        </thead>
        <tbody id="list"></tbody>
    </table>

    <button class="clear" onclick="clearAll()">Clear All</button>
</div>

<script>
const KEY="ot_data_v1";

function saveOT(){
    const t=document.getElementById("outTime").value;
    if(!t){alert("Time select garnu");return}

    const [h,m]=t.split(":").map(Number);
    const duty=17*60+30;
    const user=h*60+m;

    if(user<=duty){
        alert("5:30 PM pachi matra OT ganyincha");
        return;
    }

    const ot=((user-duty)/60).toFixed(2);
    const d=new Date().toLocaleDateString("en-GB");

    const data=JSON.parse(localStorage.getItem(KEY))||[];
    data.push({id:Date.now(),date:d,time:t,ot:ot});
    localStorage.setItem(KEY,JSON.stringify(data));
    show();
}

function show(){
    const data=JSON.parse(localStorage.getItem(KEY))||[];
    let html="",total=0;
    data.slice().reverse().forEach(e=>{
        total+=parseFloat(e.ot);
        html+=`
        <tr>
            <td>${e.date}</td>
            <td>${e.time}</td>
            <td class="ot">${e.ot}</td>
            <td><button class="del" onclick="del(${e.id})">Del</button></td>
        </tr>`;
    });
    document.getElementById("list").innerHTML=html;
    document.getElementById("total").innerText=total.toFixed(2)+" hrs";
}

function del(id){
    let d=JSON.parse(localStorage.getItem(KEY))||[];
    d=d.filter(x=>x.id!==id);
    localStorage.setItem(KEY,JSON.stringify(d));
    show();
}

function clearAll(){
    if(confirm("Sabai delete garne?")){
        localStorage.removeItem(KEY);
        show();
    }
}

show();
</script>
</body>
</html>
